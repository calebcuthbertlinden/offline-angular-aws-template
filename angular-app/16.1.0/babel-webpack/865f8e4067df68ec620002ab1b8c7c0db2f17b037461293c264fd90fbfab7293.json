{"ast":null,"code":"import { newRxError, newRxTypeError } from '../../rx-error';\nimport { rxDatabaseProperties } from './entity-properties';\nimport { isFolderPath } from '../../plugins/utils';\n\n/**\n * if the name of a collection\n * clashes with a property of RxDatabase,\n * we get problems so this function prohibits this\n */\nexport function ensureCollectionNameValid(args) {\n  if (rxDatabaseProperties().includes(args.name)) {\n    throw newRxError('DB5', {\n      name: args.name\n    });\n  }\n  validateDatabaseName(args.name);\n}\nexport function ensureDatabaseNameIsValid(args) {\n  validateDatabaseName(args.name);\n\n  /**\n   * The server-plugin has problems when a path with and ending slash is given\n   * So we do not allow this.\n   * @link https://github.com/pubkey/rxdb/issues/2251\n   */\n  if (isFolderPath(args.name)) {\n    if (args.name.endsWith('/') || args.name.endsWith('\\\\')) {\n      throw newRxError('DB11', {\n        name: args.name\n      });\n    }\n  }\n}\nvar validCouchDBStringRegexStr = '^[a-z][_$a-z0-9\\\\-]*$';\nvar validCouchDBStringRegex = new RegExp(validCouchDBStringRegexStr);\n\n/**\n * Validates that a given string is ok to be used with couchdb-collection-names.\n * We only allow these strings as database- or collection names because it ensures\n * that you later do not get in trouble when you want to use the database together witch couchdb.\n *\n * @link https://docs.couchdb.org/en/stable/api/database/common.html\n * @link https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/\n * @throws  {RxError}\n */\nexport function validateDatabaseName(name) {\n  if (typeof name !== 'string' || name.length === 0) {\n    throw newRxTypeError('UT1', {\n      name\n    });\n  }\n\n  // do not check, if foldername is given\n  if (isFolderPath(name)) {\n    return true;\n  }\n  if (!name.match(validCouchDBStringRegex) &&\n  /**\n   * The string ':memory:' is used in the SQLite RxStorage\n   * to persist data into a memory state. Often used in tests.\n   */\n  name !== ':memory:') {\n    throw newRxError('UT2', {\n      regex: validCouchDBStringRegexStr,\n      givenName: name\n    });\n  }\n  return true;\n}","map":{"version":3,"names":["newRxError","newRxTypeError","rxDatabaseProperties","isFolderPath","ensureCollectionNameValid","args","includes","name","validateDatabaseName","ensureDatabaseNameIsValid","endsWith","validCouchDBStringRegexStr","validCouchDBStringRegex","RegExp","length","match","regex","givenName"],"sources":["/Users/caleblinden/Documents/GitHub/mmf-poc/mmf-poc/node_modules/rxdb/dist/es/plugins/dev-mode/unallowed-properties.js"],"sourcesContent":["import { newRxError, newRxTypeError } from '../../rx-error';\nimport { rxDatabaseProperties } from './entity-properties';\nimport { isFolderPath } from '../../plugins/utils';\n\n/**\n * if the name of a collection\n * clashes with a property of RxDatabase,\n * we get problems so this function prohibits this\n */\nexport function ensureCollectionNameValid(args) {\n  if (rxDatabaseProperties().includes(args.name)) {\n    throw newRxError('DB5', {\n      name: args.name\n    });\n  }\n  validateDatabaseName(args.name);\n}\nexport function ensureDatabaseNameIsValid(args) {\n  validateDatabaseName(args.name);\n\n  /**\n   * The server-plugin has problems when a path with and ending slash is given\n   * So we do not allow this.\n   * @link https://github.com/pubkey/rxdb/issues/2251\n   */\n  if (isFolderPath(args.name)) {\n    if (args.name.endsWith('/') || args.name.endsWith('\\\\')) {\n      throw newRxError('DB11', {\n        name: args.name\n      });\n    }\n  }\n}\nvar validCouchDBStringRegexStr = '^[a-z][_$a-z0-9\\\\-]*$';\nvar validCouchDBStringRegex = new RegExp(validCouchDBStringRegexStr);\n\n/**\n * Validates that a given string is ok to be used with couchdb-collection-names.\n * We only allow these strings as database- or collection names because it ensures\n * that you later do not get in trouble when you want to use the database together witch couchdb.\n *\n * @link https://docs.couchdb.org/en/stable/api/database/common.html\n * @link https://neighbourhood.ie/blog/2020/10/13/everything-you-need-to-know-about-couchdb-database-names/\n * @throws  {RxError}\n */\nexport function validateDatabaseName(name) {\n  if (typeof name !== 'string' || name.length === 0) {\n    throw newRxTypeError('UT1', {\n      name\n    });\n  }\n\n  // do not check, if foldername is given\n  if (isFolderPath(name)) {\n    return true;\n  }\n  if (!name.match(validCouchDBStringRegex) &&\n  /**\n   * The string ':memory:' is used in the SQLite RxStorage\n   * to persist data into a memory state. Often used in tests.\n   */\n  name !== ':memory:') {\n    throw newRxError('UT2', {\n      regex: validCouchDBStringRegexStr,\n      givenName: name\n    });\n  }\n  return true;\n}\n"],"mappings":"AAAA,SAASA,UAAU,EAAEC,cAAc,QAAQ,gBAAgB;AAC3D,SAASC,oBAAoB,QAAQ,qBAAqB;AAC1D,SAASC,YAAY,QAAQ,qBAAqB;;AAElD;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,yBAAyBA,CAACC,IAAI,EAAE;EAC9C,IAAIH,oBAAoB,CAAC,CAAC,CAACI,QAAQ,CAACD,IAAI,CAACE,IAAI,CAAC,EAAE;IAC9C,MAAMP,UAAU,CAAC,KAAK,EAAE;MACtBO,IAAI,EAAEF,IAAI,CAACE;IACb,CAAC,CAAC;EACJ;EACAC,oBAAoB,CAACH,IAAI,CAACE,IAAI,CAAC;AACjC;AACA,OAAO,SAASE,yBAAyBA,CAACJ,IAAI,EAAE;EAC9CG,oBAAoB,CAACH,IAAI,CAACE,IAAI,CAAC;;EAE/B;AACF;AACA;AACA;AACA;EACE,IAAIJ,YAAY,CAACE,IAAI,CAACE,IAAI,CAAC,EAAE;IAC3B,IAAIF,IAAI,CAACE,IAAI,CAACG,QAAQ,CAAC,GAAG,CAAC,IAAIL,IAAI,CAACE,IAAI,CAACG,QAAQ,CAAC,IAAI,CAAC,EAAE;MACvD,MAAMV,UAAU,CAAC,MAAM,EAAE;QACvBO,IAAI,EAAEF,IAAI,CAACE;MACb,CAAC,CAAC;IACJ;EACF;AACF;AACA,IAAII,0BAA0B,GAAG,uBAAuB;AACxD,IAAIC,uBAAuB,GAAG,IAAIC,MAAM,CAACF,0BAA0B,CAAC;;AAEpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASH,oBAAoBA,CAACD,IAAI,EAAE;EACzC,IAAI,OAAOA,IAAI,KAAK,QAAQ,IAAIA,IAAI,CAACO,MAAM,KAAK,CAAC,EAAE;IACjD,MAAMb,cAAc,CAAC,KAAK,EAAE;MAC1BM;IACF,CAAC,CAAC;EACJ;;EAEA;EACA,IAAIJ,YAAY,CAACI,IAAI,CAAC,EAAE;IACtB,OAAO,IAAI;EACb;EACA,IAAI,CAACA,IAAI,CAACQ,KAAK,CAACH,uBAAuB,CAAC;EACxC;AACF;AACA;AACA;EACEL,IAAI,KAAK,UAAU,EAAE;IACnB,MAAMP,UAAU,CAAC,KAAK,EAAE;MACtBgB,KAAK,EAAEL,0BAA0B;MACjCM,SAAS,EAAEV;IACb,CAAC,CAAC;EACJ;EACA,OAAO,IAAI;AACb"},"metadata":{},"sourceType":"module","externalDependencies":[]}